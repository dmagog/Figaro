<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Figaro ‚Äî –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è ¬´–ë–µ–∑—É–º–Ω—ã–µ –¥–Ω–∏ –≤ –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥–µ¬ª</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noteworthy:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —à–∞–ø–∫–∞ -->
    <nav class="top-navbar-modern">
        <div class="nav-background">
            <div class="nav-particles"></div>
            <div class="nav-glow"></div>
        </div>
        
        <div class="nav-container">
            <div class="nav-brand">
                <a href="/" class="brand-icon-nav-link">
                    <div class="brand-icon-nav">üéà</div>
                </a>
                <div class="brand-text">
                    <h1 class="nav-title-modern">Figaro</h1>
                    <span class="nav-subtitle">–ü—Ä–æ–≤–µ–¥—ë—Ç –ø–æ —Ñ–µ—Å—Ç–∏–≤–∞–ª—é</span>
                </div>
                <div class="nav-brand-glow"></div>
            </div>
            
            <div class="nav-menu">
                {% if user %}
                <div class="nav-user">
                    <span class="user-greeting">–ü—Ä–∏–≤–µ—Ç, {{ user.name or user.email }}!</span>
                    <div class="nav-actions">
                        {% if user.is_superuser %}
                        <a href="/admin" class="nav-btn-modern nav-btn-admin">–ê–¥–º–∏–Ω–∫–∞</a>
                        {% endif %}
                        <a href="/profile" class="nav-btn-modern nav-btn-primary">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
                        <a href="/logout" class="nav-btn-modern nav-btn-secondary">üö™ –í—ã–π—Ç–∏</a>
                    </div>
                </div>
                {% else %}
                <div class="nav-auth">
                    <a href="/login" class="nav-btn-modern nav-btn-primary">üîë –í–æ–π—Ç–∏</a>
                    <a href="/register" class="nav-btn-modern nav-btn-secondary">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –ª–µ–Ω–¥–∏–Ω–≥–∞ -->
    <section class="hero-screen active" id="hero-container">
        <div class="hero-background">
            <div class="hero-particles"></div>
            <div class="hero-glow"></div>
        </div>
        <div class="hero-content">
            <div class="hero-balloon">üéà</div>
            
            <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
            <div class="hero-text-content hero-text-1 active" id="hero-text-1">
                <h1 class="hero-title">–ß—Ç–æ –≤ 8 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä–∞–∑</br>–±–æ–ª—å—à–µ –º–∏–ª–ª–∏–∞—Ä–¥–∞?</h1>
            </div>
            
            <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
            <div class="hero-text-content hero-text-2" id="hero-text-2">
                <div class="hero-math-expression">8 √ó –º–∏–ª–ª–∏–æ–Ω–æ–≤ √ó –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤</div>
                <h1 class="hero-title">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è<br>¬´–ë–µ–∑—É–º–Ω—ã–µ –¥–Ω–∏¬ª!</h1>
                <h2 class="hero-subtitle"><span class="figaro-text">Figaro</span> –ø–æ–º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ —Å–≤–æ–π –ø—É—Ç—å!</h2>
            </div>
            
            <!-- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ —ç–∫—Ä–∞–Ω–∞ -->
            <div class="hero-text-content hero-text-3" id="hero-text-3">
                <h1 class="hero-title"><span class="figaro-text">Figaro</span></h1>
                <h2 class="hero-subtitle">–≤–∞—à –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤</h2>
            </div>
        </div>
        
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ -->
        <div class="hero-scroll-indicator" id="hero-scroll-indicator">
            <div class="scroll-arrow">‚Üì</div>
            <span id="scroll-text">–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑</span>
        </div>
    </section>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content" id="main-content">
        <div class="container">
            <div class="tabs-container">
            <div class="tabs">
                <button class="tab-btn active" id="tab-about-btn" onclick="showTab('about')">‚ÑπÔ∏è –û —Å–µ—Ä–≤–∏—Å–µ</button>
                <button class="tab-btn" id="tab-form-btn" onclick="showTab('form')">üìù –ê–Ω–∫–µ—Ç–∞</button>
                <button class="tab-btn" id="tab-recs-btn" onclick="showTab('recs')">üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ –û –ø—Ä–æ–µ–∫—Ç–µ -->
            <div class="tab-content" id="tab-about" style="display:block;">
                <div class="about-section">
                    <div class="survey-header">
                        <div class="survey-title-container">
                            <h2>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                        </div>
                    </div>
                    
                    <div class="about-content">
                        <div class="about-feature glass-card">
                            <div class="feature-icon-modern">üéØ</div>
                            <div class="feature-text">
                                <h3 class="feature-title-modern">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã</h3>
                                <p>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è ‚Äî —Å–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã: —É—á—Ç—ë–º –≤–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã, —Å–±–∞–ª–∞–Ω—Å–∏—Ä—É–µ–º –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å –∏ —Ç–µ–º–ø —Ñ–µ—Å—Ç–∏–≤–∞–ª—è.</p>
                            </div>
                            <div class="feature-glow"></div>
                        </div>
                        
                        <div class="about-feature glass-card">
                            <div class="feature-icon-modern">üß†</div>
                            <div class="feature-text">
                                <h3 class="feature-title-modern">–ò–ò –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ</h3>
                                <p>–ü—Ä–µ–¥–ª–æ–∂–∏–º —Ç–æ, —á—Ç–æ –Ω–µ —Å–º–æ–∂–µ—Ç —á–µ–ª–æ–≤–µ–∫ ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º 8 √ó –º–∏–ª–ª–∏–æ–Ω–æ–≤ √ó –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏.</p>
                            </div>
                            <div class="feature-glow"></div>
                        </div>
                        
                        <div class="about-feature glass-card">
                            <div class="feature-icon-modern">‚ö°</div>
                            <div class="feature-text">
                                <h3 class="feature-title-modern">–†–µ—à–∏—Ç–µ–ª—å–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ</h3>
                                <p>–î–µ—Å—è—Ç—å –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ —á–∞—Å–∞: –≤—ã–±—Ä–∞—Ç—å, —Å—Ä–∞–≤–Ω–∏—Ç—å –∏ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º. –ò—Å–∫–ª—é—á–∞–µ–º –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–æ–≥—Ä–∞–º–º –∏ –Ω–∞–∫–ª–∞–¥–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –£—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä–µ–º—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –∑–∞–ª–∞–º–∏, —É–º–µ—Å—Ç–Ω–æ—Å—Ç—å –æ—Ñ—Ñ-–ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –≤—Ä–µ–º—è –Ω–∞ –æ–±–µ–¥.</p>
                            </div>
                            <div class="feature-glow"></div>
                        </div>
                        
                        <div class="about-feature about-cta-feature glass-card">
                            <div class="feature-text">
                                <h3 class="feature-title-modern">–ì–æ—Ç–æ–≤—ã –Ω–∞–π—Ç–∏ —Å–≤–æ–π –∏–¥–µ–∞–ª—å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç?</h3>
                                <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫—É—é –∞–Ω–∫–µ—Ç—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —É–∂–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç!</p>
                                <button class="btn btn-next-modern" onclick="showTab('form')">üìù –ù–∞—á–∞—Ç—å –∞–Ω–∫–µ—Ç—É</button>
                            </div>
                            <div class="cta-glow"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ –ê–Ω–∫–µ—Ç–∞ -->
            <div class="tab-content" id="tab-form" style="display:none;">
                <div class="survey-section" id="user-survey">
                    <div class="survey-header">
                        <div class="survey-title-container">
                            <h2>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∞–Ω–∫–µ—Ç—É ‚Äî –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                        </div>
                        {% if user and user.preferences %}
                        <div class="survey-actions">
                            <button id="reset-survey-btn" class="btn-reset-survey" onclick="resetSurvey()" title="–°–±—Ä–æ—Å–∏—Ç—å –∞–Ω–∫–µ—Ç—É">
                                <span class="reset-icon">üîÑ</span>
                                <span class="reset-text">–°–±—Ä–æ—Å–∏—Ç—å</span>
                            </button>
                        </div>
                        {% endif %}
                    </div>
                    
                    <form class="survey-form" id="preferences-form">
                        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
                        <div class="survey-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div class="progress-text">
                                <span id="current-step">1</span> –∏–∑ <span id="total-steps">7</span>
                            </div>
                        </div>
                        
                        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
                        <div class="survey-navigation">
                            <button type="button" class="btn-prev" id="btn-prev" style="display: none;">‚Üê –ù–∞–∑–∞–¥</button>
                            <button type="button" class="btn-next" id="btn-next">–î–∞–ª–µ–µ ‚Üí</button>
                            <button type="submit" class="btn-submit" id="btn-submit" style="display: none;">üéØ –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</button>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 1: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç -->
                        <div class="survey-slide active" data-step="1">
                            <div class="slide-content">
                                <h3 class="slide-title">–ß—Ç–æ –¥–ª—è –≤–∞—Å –≤–∞–∂–Ω–µ–µ –≤ –º–∞—Ä—à—Ä—É—Ç–µ?</h3>
                                <p class="slide-description">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ª—É—á—à–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç —Ñ–µ—Å—Ç–∏–≤–∞–ª—è</p>
                                
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="priority" value="intellect" class="radio-input" onchange="handleRadioChange('priority', 'intellect')">
                                        <div class="radio-content">
                                            <div class="radio-icon">üîç</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–£–≤–∏–¥–µ—Ç—å —Ä–µ–¥–∫–æ–µ, —É—Å–ª—ã—à–∞—Ç—å –Ω–µ–æ–±—ã—á–Ω–æ–µ</div>
                                                <div class="radio-description">–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ –Ω–∞—Å—ã—â–µ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="priority" value="comfort" class="radio-input" onchange="handleRadioChange('priority', 'comfort')">
                                        <div class="radio-content">
                                            <div class="radio-icon">üõãÔ∏è</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ü—Ä–æ–≤–µ—Å—Ç–∏ –¥–µ–Ω—å —É–¥–æ–±–Ω–æ –∏ –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫</div>
                                                <div class="radio-description">–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π —Ç–µ–º–ø –∏ –∑–Ω–∞–∫–æ–º—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="priority" value="balance" class="radio-input" onchange="handleRadioChange('priority', 'balance')">
                                        <div class="radio-content">
                                            <div class="radio-icon">‚öñÔ∏è</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ù–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –Ω–æ–≤–∏–∑–Ω–æ–π –∏ —É–¥–æ–±—Å—Ç–≤–æ–º</div>
                                                <div class="radio-description">–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 2: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ -->
                        <div class="survey-slide" data-step="2">
                            <div class="slide-content">
                                <h3 class="slide-title">–°–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤ –≤ –¥–µ–Ω—å –¥–ª—è –í–∞—Å –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ?</h3>
                                <p class="slide-description">–ö–æ–Ω—Ü–µ—Ä—Ç—ã –¥–ª—è—Ç—å—Å—è –≤—Å–µ–≥–æ 45 –º–∏–Ω—É—Ç –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–µ—Å—É—Ç ¬´–ª—ë–≥–∫—É—é¬ª –ø—Ä–æ–≥—Ä–∞–º–º—É</p>
                                
                                <div class="radio-group compact">
                                    <label class="radio-option compact">
                                        <input type="radio" name="concerts_range" value="2-3" class="radio-input" onchange="handleRadioChange('concerts_range', '2-3')">
                                        <div class="radio-content">
                                            <div class="radio-number">2‚Äì3</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–°–ø–æ–∫–æ–π–Ω—ã–π —Ç–µ–º–ø</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option compact">
                                        <input type="radio" name="concerts_range" value="3-4" class="radio-input" onchange="handleRadioChange('concerts_range', '3-4')">
                                        <div class="radio-content">
                                            <div class="radio-number">3‚Äì4</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option compact">
                                        <input type="radio" name="concerts_range" value="4-5" class="radio-input" onchange="handleRadioChange('concerts_range', '4-5')">
                                        <div class="radio-content">
                                            <div class="radio-number">4‚Äì5</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option compact">
                                        <input type="radio" name="concerts_range" value="any" class="radio-input" onchange="handleRadioChange('concerts_range', 'any')">
                                        <div class="radio-content">
                                            <div class="radio-number infinity">‚àû</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 3: –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ -->
                        <div class="survey-slide" data-step="3">
                            <div class="slide-content">
                                <h3 class="slide-title">–ß—Ç–æ –±–ª–∏–∂–µ –ø–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—é?</h3>
                                <p class="slide-description">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–ª—å –ø—Ä–æ–≥—Ä–∞–º–º—ã, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –±–æ–ª—å—à–µ –Ω—Ä–∞–≤–∏—Ç—Å—è</p>
                                
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="diversity" value="mono" class="radio-input" onchange="handleRadioChange('diversity', 'mono')">
                                        <div class="radio-content">
                                            <div class="radio-icon">üéº</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ü–æ—Å–≤—è—Ç–∏—Ç—å –¥–µ–Ω—å –æ–¥–Ω–æ–º—É –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—É</div>
                                                <div class="radio-description">–ì–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ –≤ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="diversity" value="diverse" class="radio-input" onchange="handleRadioChange('diversity', 'diverse')">
                                        <div class="radio-content">
                                            <div class="radio-icon">üåà</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–ú–∏–∫—Å –∏–∑ –∂–∞–Ω—Ä–æ–≤, —Å—Ç–∏–ª–µ–π –∏ —ç–ø–æ—Ö</div>
                                                <div class="radio-description">–†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
                                            </div>
                                        </div>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="diversity" value="flexible" class="radio-input" onchange="handleRadioChange('diversity', 'flexible')">
                                        <div class="radio-content">
                                            <div class="radio-icon">üé≤</div>
                                            <div class="radio-text">
                                                <div class="radio-title">–û—Ç–∫—Ä—ã—Ç(–∞) –∫ —Ä–∞–∑–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º</div>
                                                <div class="radio-description">–ì–æ—Ç–æ–≤(–∞) –∫ —Å—é—Ä–ø—Ä–∏–∑–∞–º</div>
                                            </div>
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 4: –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤ -->
                        <div class="survey-slide" data-step="4">
                            <div class="slide-content">
                                <h3 class="slide-title">–ö–∞–∫–∏—Ö –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–ª—ã—à–∞—Ç—å?</h3>
                                <p class="slide-description">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 5 –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤ (—á–µ–º –∫—Ä—É–ø–Ω–µ–µ —Ñ–∞–º–∏–ª–∏—è ‚Äî —Ç–µ–º —á–∞—â–µ –æ–Ω –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è)</p>
                                
                                <div class="tag-cloud" id="composers-cloud">
                                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä–æ–≤...</div>
                                </div>
                                
                                <div class="selected-tags" id="selected-composers">
                                    <span class="selected-count">–í—ã–±—Ä–∞–Ω–æ: <span id="composers-count">0</span>/5</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 5: –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π -->
                        <div class="survey-slide" data-step="5">
                            <div class="slide-content">
                                <h3 class="slide-title">–ö–∞–∫–∏—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –≤—ã —Ö–æ—Ç–∏—Ç–µ —É—Å–ª—ã—à–∞—Ç—å?</h3>
                                <p class="slide-description">–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 5 –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π (—Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å)</p>
                                
                                <div class="tag-cloud-search" style="text-align:center; margin-bottom:10px; position:relative;">
                                    <input type="text" id="artists-cloud-search" placeholder="–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è..." style="padding:6px 12px; border-radius:8px; border:1.5px solid #e0e7eb; font-size:0.95em; width:70%; max-width:320px;">
                                    <div id="artists-search-dropdown" style="position:absolute; left:50%; transform:translateX(-50%); top:38px; background:white; border:1.5px solid #e0e7eb; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08); z-index:10; display:none; min-width:220px; max-height:180px; overflow-y:auto;"></div>
                                </div>
                                <div class="tag-cloud" id="artists-cloud">
                                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π...</div>
                                </div>
                                
                                <div class="selected-tags" id="selected-artists">
                                    <span class="selected-count">–í—ã–±—Ä–∞–Ω–æ: <span id="artists-count">0</span>/5</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 6: –ö–æ–Ω—Ü–µ—Ä—Ç—ã -->
                        <div class="survey-slide" data-step="6">
                            <div class="slide-content">
                                <h3 class="slide-title">–ö–∞–∫–∏–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã –≤—ã —É–∂–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ—Å–µ—Ç–∏—Ç—å?</h3>
                                <p class="slide-description">–û—Ç–º–µ—Ç—å—Ç–µ –Ω–æ–º–µ—Ä–∞ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</p>
                                
                                <div class="tag-cloud" id="concerts-cloud">
                                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ü–µ—Ä—Ç–æ–≤...</div>
                                </div>
                                
                                <div class="selected-tags" id="selected-concerts">
                                    <span class="selected-count">–í—ã–±—Ä–∞–Ω–æ: <span id="concerts-count">0</span></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –°–ª–∞–π–¥ 7: –†–µ–∑—é–º–µ -->
                        <div class="survey-slide" data-step="7">
                            <div class="slide-content">
                                <p class="slide-description">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –º—ã –ø–æ–Ω—è–ª–∏ –í–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è</p>
                                
                                <div class="summary-container" id="summary-container">
                                    <div class="summary-section" data-type="priority">
                                        <h4>üéØ –ü–æ–¥—Ö–æ–¥ –∫ –º–∞—Ä—à—Ä—É—Ç—É</h4>
                                        <div class="summary-item" id="priority-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                    
                                    <div class="summary-section" data-type="intensity">
                                        <h4>üìÖ –ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</h4>
                                        <div class="summary-item" id="max-concerts-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                    
                                    <div class="summary-section" data-type="diversity">
                                        <h4>üéº –†–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ</h4>
                                        <div class="summary-item" id="diversity-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                    
                                    <div class="summary-section" data-type="composers">
                                        <h4>üéµ –õ—é–±–∏–º—ã–µ –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—ã</h4>
                                        <div class="summary-item" id="composers-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                    
                                    <div class="summary-section" data-type="artists">
                                        <h4>üé§ –õ—é–±–∏–º—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</h4>
                                        <div class="summary-item" id="artists-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                    
                                    <div class="summary-section" data-type="concerts">
                                        <h4>üé≠ –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ—Ä—Ç—ã</h4>
                                        <div class="summary-item" id="planned-concerts-summary">–ù–µ –≤—ã–±—Ä–∞–Ω–æ</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- –í–∫–ª–∞–¥–∫–∞ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
            <div class="tab-content" id="tab-recs" style="display:none;">
                <div id="recommendations-spinner"></div>
                <div id="recommendations-block">
                    <!-- –ü—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    <div id="recommendations-cta" class="recommendations-cta">
                        <div class="cta-content">
                            <div class="cta-icon">üéØ</div>
                            <h2>–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h2>
                            <p>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫—É—é –∞–Ω–∫–µ—Ç—É, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–ª—è –≤–∞—Å –∏–¥–µ–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø–æ —Ñ–µ—Å—Ç–∏–≤–∞–ª—é</p>
                            <div class="cta-features">
                                <div class="cta-feature">
                                    <span class="feature-icon">‚ö°</span>
                                    <span>–ë—ã—Å—Ç—Ä–æ –∏ –ø—Ä–æ—Å—Ç–æ</span>
                                </div>
                                <div class="cta-feature">
                                    <span class="feature-icon">üéµ</span>
                                    <span>–£—á–∏—Ç—ã–≤–∞–µ–º –≤–∞—à–∏ –≤–∫—É—Å—ã</span>
                                </div>
                                <div class="cta-feature">
                                    <span class="feature-icon">üß†</span>
                                    <span>–ò–ò-–∞–ª–≥–æ—Ä–∏—Ç–º—ã</span>
                                </div>
                            </div>
                            <button class="btn btn-next" onclick="showTab('form')">üìù –ó–∞–ø–æ–ª–Ω–∏—Ç—å –∞–Ω–∫–µ—Ç—É</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>
    
    <!-- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥–≤–∞–ª -->
    <footer class="footer-modern">
        <div class="footer-background">
            <div class="footer-particles"></div>
            <div class="footer-glow"></div>
        </div>
        
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section glass-card">
                    <div class="footer-brand">
                        <div class="brand-icon">üéà</div>
                        <h3 class="neon-text">Figaro</h3>
                        <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥</br>–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è</br>¬´–ë–µ–∑—É–º–Ω—ã–µ –¥–Ω–∏ –≤ –ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥–µ¬ª</p>
                        <div class="brand-glow"></div>
                    </div>
                </div>
                
                <div class="footer-section glass-card">
                    <h4 class="section-title">–û –ø—Ä–æ–µ–∫—Ç–µ</h4>
                    <ul class="footer-links">
                        <li><a href="#about" class="link-hover">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</a></li>
                        <li><a href="#features" class="link-hover">–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏</a></li>
                        <li><a href="#ai" class="link-hover">–ò–ò-–∞–ª–≥–æ—Ä–∏—Ç–º—ã</a></li>
                    </ul>
                </div>
                
                <div class="footer-section glass-card">
                    <h4 class="section-title">–§–µ—Å—Ç–∏–≤–∞–ª—å</h4>
                    <ul class="footer-links">
                        <li><a href="https://bd.sgaf.ru/festival/31491" target="_blank" class="link-hover">–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç</a></li>
                        <li><a href="https://bd.sgaf.ru/festival/31491/afisha" target="_blank" class="link-hover">–ü—Ä–æ–≥—Ä–∞–º–º–∞</a></li>
                        <li><a href="https://bd.sgaf.ru/festival/31491/musicians" target="_blank" class="link-hover">–£—á–∞—Å—Ç–Ω–∏–∫</a></li>
                        <li><a href="https://bd.sgaf.ru/festival/31491/zaly" target="_blank" class="link-hover">–ü–ª–æ—â–∞–¥–∫–∏</a></li>
                    </ul>
                </div>
                
                <div class="footer-section glass-card">
                    <h4 class="section-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                    <ul class="footer-links">
                        <li><a href="/profile" class="link-hover">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a></li>
                        <li><a href="/profile?tab=route" class="link-hover">–ú–∞—Ä—à—Ä—É—Ç–Ω—ã–π –ª–∏—Å—Ç</a></li>
                        <li><a href="" class="link-hover">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom glass-card">
                <div class="footer-copyright">
                    <p>&copy; 2025 Figaro. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                </div>
                <div class="footer-social">
                    <a href="{{ bot_link }}" target="_blank" class="social-link-modern" data-tooltip="–ù–∞—à Telegram-–±–æ—Ç">
                        <svg class="telegram-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.894 8.221l-1.97 9.28c-.145.658-.537.818-1.084.508l-3-2.21-1.446 1.394c-.14.18-.357.295-.6.295-.002 0-.003 0-.005 0l.213-3.054 5.56-5.022c.24-.213-.054-.334-.373-.121l-6.869 4.326-2.96-.924c-.64-.203-.658-.64.135-.954l11.566-4.458c.538-.196 1.006.128.832.941z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>
    
    <script src="/static/js/index.js"></script>
    
    <script>
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ hero-—Å–µ–∫—Ü–∏—è–º–∏
        let currentHeroScreen = 1;
        const totalHeroScreens = 3;
        let isTransitioning = false;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç–∏ –∞–Ω–∫–µ—Ç—ã
        function checkSurveyCompletion() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã –≤ localStorage
            const surveyData = localStorage.getItem('survey_data');
            if (surveyData) {
                try {
                    const data = JSON.parse(surveyData);
                    // –ï—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ –ø–æ–ª–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–±—Ä–æ—Å–∞
                    if (Object.keys(data).length > 0) {
                        showResetButton();
                    }
                } catch (e) {
                    console.error('Error parsing survey data:', e);
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞
        function showResetButton() {
            const surveyActions = document.querySelector('.survey-actions');
            if (!surveyActions) {
                const surveyHeader = document.querySelector('.survey-header');
                if (surveyHeader) {
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'survey-actions';
                    actionsDiv.innerHTML = `
                        <button id="reset-survey-btn" class="btn-reset-survey" onclick="resetSurvey()" title="–°–±—Ä–æ—Å–∏—Ç—å –∞–Ω–∫–µ—Ç—É">
                            <span class="reset-icon">üîÑ</span>
                            <span class="reset-text">–°–±—Ä–æ—Å–∏—Ç—å</span>
                        </button>
                    `;
                    surveyHeader.appendChild(actionsDiv);
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ —Å–±—Ä–æ—Å–∞
        function hideResetButton() {
            const surveyActions = document.querySelector('.survey-actions');
            if (surveyActions) {
                surveyActions.remove();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        function updateRecommendationCounters() {
            // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –±–ª–æ–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (—Ä–∞–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã)
            const recommendationBlocks = document.querySelectorAll('.rec-group, .recommendation-group, [data-recommendation-type]');
            
            recommendationBlocks.forEach(block => {
                const groupTitle = block.querySelector('.group-title, .rec-group-title, h3');
                if (groupTitle) {
                    const title = groupTitle.textContent.trim();
                    
                    // –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å–µ–∫—Ü–∏—é –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ
                    const navSection = document.querySelector(`[data-category="${title}"], .nav-section[data-title="${title}"]`);
                    if (navSection) {
                        const countElement = navSection.querySelector('.nav-section-count');
                        if (countElement) {
                            // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –±–ª–æ–∫–µ (—Ä–∞–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã)
                            const routes = block.querySelectorAll('.route-item, .rec-route, tr[data-route-id]');
                            const count = routes.length;
                            
                            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫
                            countElement.textContent = count;
                            
                            // –ï—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –Ω–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å zero
                            if (count === 0) {
                                countElement.classList.add('zero');
                                navSection.style.opacity = '0.5';
                            } else {
                                countElement.classList.remove('zero');
                                navSection.style.opacity = '1';
                            }
                        }
                    }
                }
            });
            
            // –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            updateRecommendationCards();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        function updateRecommendationCards() {
            // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            const recommendationCards = document.querySelectorAll('.recommendation-card, .rec-card, [data-recommendation-card]');
            
            recommendationCards.forEach(card => {
                const countElement = card.querySelector('.card-count, .route-count, [data-count]');
                if (countElement) {
                    // –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
                    const cardTitle = card.querySelector('.card-title, .rec-title, h4');
                    if (cardTitle) {
                        const title = cardTitle.textContent.trim();
                        const correspondingBlock = document.querySelector(`[data-group="${title}"], .rec-group[data-title="${title}"]`);
                        
                        if (correspondingBlock) {
                            const routes = correspondingBlock.querySelectorAll('.route-item, .rec-route, tr[data-route-id]');
                            const count = routes.length;
                            countElement.textContent = `${count} –º–∞—Ä—à—Ä—É—Ç–æ–≤`;
                        }
                    }
                }
            });
        }
        
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é showTab –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
        function showTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.style.display = 'none');
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            const tabButtons = document.querySelectorAll('.tab-btn');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const selectedTab = document.getElementById(`tab-${tabName}`);
            if (selectedTab) {
                selectedTab.style.display = 'block';
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            const selectedButton = document.getElementById(`tab-${tabName}-btn`);
            if (selectedButton) {
                selectedButton.classList.add('active');
            }
            
            // –ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –≤–∫–ª–∞–¥–∫—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –æ–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            if (tabName === 'recs') {
                setTimeout(() => {
                    forceUpdateAllCounters();
                }, 100);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        function onRecommendationsLoaded() {
            setTimeout(() => {
                updateRecommendationCounters();
            }, 200);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å—á–µ—Ç—á–∏–∫–æ–≤
        function forceUpdateAllCounters() {
            console.log('–û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å—á–µ—Ç—á–∏–∫–∏...');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä–µ
            updateRecommendationCounters();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
            updateRecommendationCards();
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—â–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–º "10 –º–∞—Ä—à—Ä—É—Ç–æ–≤"
            const allCountElements = document.querySelectorAll('*');
            allCountElements.forEach(element => {
                if (element.textContent && element.textContent.includes('10 –º–∞—Ä—à—Ä—É—Ç–æ–≤')) {
                    // –ù–∞—Ö–æ–¥–∏–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –±–ª–æ–∫ —Å –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
                    const parentCard = element.closest('.recommendation-card, .rec-card, .nav-section');
                    if (parentCard) {
                        const cardTitle = parentCard.querySelector('.card-title, .rec-title, h4, .nav-section-title');
                        if (cardTitle) {
                            const title = cardTitle.textContent.trim();
                            const correspondingBlock = document.querySelector(`[data-group="${title}"], .rec-group[data-title="${title}"]`);
                            
                            if (correspondingBlock) {
                                const routes = correspondingBlock.querySelectorAll('.route-item, .rec-route, tr[data-route-id]');
                                const count = routes.length;
                                element.textContent = element.textContent.replace('10 –º–∞—Ä—à—Ä—É—Ç–æ–≤', `${count} –º–∞—Ä—à—Ä—É—Ç–æ–≤`);
                            }
                        }
                    }
                }
            });
            
            console.log('–°—á–µ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.updateCounters = forceUpdateAllCounters;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Å–ª–µ–¥—É—é—â–µ–π hero-—Å–µ–∫—Ü–∏–∏
        function nextHeroScreen() {
            console.log('nextHeroScreen called, currentHeroScreen:', currentHeroScreen, 'isTransitioning:', isTransitioning);
            if (isTransitioning) return;
            
            isTransitioning = true;
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            const currentTextContent = document.getElementById(`hero-text-${currentHeroScreen}`);
            if (currentTextContent) {
                currentTextContent.classList.remove('active');
            }
            
            currentHeroScreen++;
            
            if (currentHeroScreen > totalHeroScreens) {
                console.log('Transitioning to main content');
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–µ–ª —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã
                localStorage.setItem('figaro_intro_seen', 'true');
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
                setTimeout(() => {
                    const mainContent = document.getElementById('main-content');
                    const heroContainer = document.getElementById('hero-container');
                    console.log('Main content element:', mainContent);
                    if (mainContent && heroContainer) {
                        // –°–∫—Ä—ã–≤–∞–µ–º hero-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                        heroContainer.style.display = 'none';
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
                        mainContent.classList.add('active');
                        // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ –Ω–∞—á–∞–ª—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                        window.scrollTo(0, 0);
                    } else {
                        console.error('Main content or hero container element not found!');
                    }
                    isTransitioning = false;
                }, 800);
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
            setTimeout(() => {
                const nextTextContent = document.getElementById(`hero-text-${currentHeroScreen}`);
                if (nextTextContent) {
                    nextTextContent.classList.add('active');
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏
                const scrollText = document.getElementById('scroll-text');
                if (scrollText) {
                    if (currentHeroScreen === 2) {
                        scrollText.textContent = '–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑';
                    } else if (currentHeroScreen === 3) {
                        scrollText.textContent = '–ù–∞—á–∞—Ç—å';
                    }
                }
                
                isTransitioning = false;
            }, 800);
        }
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ hero-—Å–µ–∫—Ü–∏—è–º
        document.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –∞–Ω–∫–µ—Ç—ã
            checkSurveyCompletion();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            forceUpdateAllCounters();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∏–¥–µ–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã
            const hasSeenIntro = localStorage.getItem('figaro_intro_seen');
            
            if (hasSeenIntro) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –≤–∏–¥–µ–ª —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
                const heroContainer = document.getElementById('hero-container');
                const mainContent = document.getElementById('main-content');
                
                if (heroContainer && mainContent) {
                    heroContainer.style.display = 'none';
                    mainContent.classList.add('active');
                }
            } else {
                // –ü–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —ç–∫—Ä–∞–Ω—ã
                // –ü–µ—Ä–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω –≤ HTML
                
                const heroContainer = document.getElementById('hero-container');
                if (heroContainer) {
                    heroContainer.addEventListener('click', nextHeroScreen);
                }
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ - —Ç–æ–ª—å–∫–æ –¥–ª—è hero-—Å–µ–∫—Ü–∏–π
                let scrollTimeout;
                window.addEventListener('scroll', function() {
                    if (scrollTimeout) clearTimeout(scrollTimeout);
                    
                    scrollTimeout = setTimeout(() => {
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        
                        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–∫—Ä—É—Ç–∏–ª –≤–Ω–∏–∑ –∏ –º—ã –Ω–∞ hero-—Å–µ–∫—Ü–∏–∏
                        if (scrollTop > 50 && currentHeroScreen <= totalHeroScreens) {
                            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
                            window.scrollTo(0, 0);
                            nextHeroScreen();
                        }
                    }, 100);
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∞–≤–∏—à
                document.addEventListener('keydown', function(e) {
                    if (e.key === 'ArrowDown' || e.key === ' ' || e.key === 'Enter') {
                        e.preventDefault();
                        nextHeroScreen();
                    }
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–ª–µ—Å–∏–∫–∞ –º—ã—à–∏ –¥–ª—è hero-—Å–µ–∫—Ü–∏–π
                let wheelTimeout;
                window.addEventListener('wheel', function(e) {
                    if (currentHeroScreen <= totalHeroScreens) {
                        e.preventDefault();
                        
                        if (wheelTimeout) clearTimeout(wheelTimeout);
                        
                        wheelTimeout = setTimeout(() => {
                            if (e.deltaY > 0) {
                                // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –≤–Ω–∏–∑
                                nextHeroScreen();
                            }
                        }, 50);
                    }
                }, { passive: false });
            }
        });
    </script>
</body>
</html> 